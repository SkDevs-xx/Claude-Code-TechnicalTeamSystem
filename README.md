# Claude Code tmux Max: AI マルチエージェント開発フレームワーク

**⚡ 5つのClaude Codeインスタンスが協調して動作する、世界初の実用的AIチーム開発システム**

このリポジトリは、tmux環境で複数のClaude Codeインスタンスを統合管理し、実際の開発チームのような協調作業を実現する革新的なフレームワークです。単一のAIが持つ「暴走」「忘却」「役割混乱」といった問題を、厳密に設計された階層構造とプロトコルによって解決します。

## 🎯 なぜこのフレームワークを使うべきか

### 単一AIの限界を突破する3つの理由

**1. 役割混乱の完全排除**
```
❌ 単一AI: 「データベース設計中...あ、UIも作らなきゃ...APIはどうしよう...」
✅ 本システム: BP1「DB担当です」BP2「API担当です」BP3「UI担当です」
```

**2. 報告忘れ・タスク放棄の防止**
```
❌ 単一AI: タスク完了後に満足して報告を忘れる
✅ 本システム: return_protocolにより100%の報告率を実現
```

**3. 並列処理による圧倒的な開発速度**
```
❌ 単一AI: 順次処理で各タスクを実行
✅ 本システム: 4つのBPが同時並行で開発（理論上4倍速）
```

## 🏗️ システム設計思想

### 最適化されたエージェント構成
```
[人間ユーザー] (日本語)
    ↓
[Tech: 統合リーダー] (日本語 ↔ 英語JSON変換)
    ↓ ↓ ↓ ↓
[BP1][BP2][BP3][BP4] (並列実行・専門特化)
```

**統合の理由**: PM + TechLeadの分離は通信オーバーヘッドを生むため、Techに統合して効率化

## 🔥 本システムの核心的こだわり

### 1. 厳密な言語プロトコル分離
```json
{
  "人間⇔Tech": "日本語のみ（ユーザビリティ最優先）",
  "Tech⇔BPs": "英語JSONのみ（論理的精度最優先）",
  "理由": "言語混在によるAIの混乱を完全排除"
}
```

### 2. 送信元追跡システム
```bash
# 従来: 誰からのメッセージか不明
./agent-send.sh tech '{"status": "complete"}'

# 本システム: 送信元を第3引数で明示または自動検出
./roles/agent-send.sh tech '{"status": "complete"}' bp1
# または環境変数で送信元を指定
export AGENT_ROLE=bp1
./roles/agent-send.sh tech '{"status": "complete"}'
```

### 3. 役割境界の憲法的強制
- `CLAUDE.md`: システム全体の不可侵ルール
- `roles.json`: 役割定義の単一真実源
- 各エージェントは起動時に自己の権限を確認

## 🚀 他のAI開発手法との決定的な違い

### 1. メモリの永続性
- **通常のClaude**: 会話が長くなると初期の指示を忘れる
- **本システム**: 各エージェントがCLAUDE.mdとrole.mdを常に参照

### 2. エラーからの自己回復
- **通常のClaude**: エラーで止まる、手動介入が必要
- **本システム**: BPがERROR/BLOCKEDステータスを報告→Techが自動対処

### 3. 真の並列処理
- **通常のClaude**: 疑似的なマルチタスク（実際は順次処理）
- **本システム**: 物理的に独立した5プロセスが同時実行

### 4. 監査可能性
- **通常のClaude**: 処理過程がブラックボックス
- **本システム**: 全通信がJSONログとして記録・追跡可能

## 📁 プロジェクト構成

```
Claude-Code-TechnicalTeamSystem/
├── roles/                 # エージェント定義
│   ├── roles.json         # 役割・権限の厳密な定義
│   ├── tech.md            # TECHエージェント指示書
│   ├── bp.md              # 開発者エージェント指示書
│   └── agent-send.sh      # エージェント間通信スクリプト
├── projects/              # プロジェクト作業ディレクトリ
│   └── [project_name]/    # 各プロジェクトの専用ディレクトリ
├── logs/                  # 通信ログ（実行時に自動作成）
│   └── send_log.txt       # エージェント間通信ログ
├── tmp/                   # 一時ファイル（実行時に自動作成）
├── CLAUDE.md              # システム全体の憲法
├── README.md              # このファイル
├── setup.sh               # 環境セットアップスクリプト
└── session-kill.sh        # セッション終了スクリプト
```

## 🔧 環境セットアップ

### 前提条件
- **tmux**: セッション管理ツール
- **Claude Code**: ターミナル対応のClaude環境
- **Bash/Zsh**: Unix系シェル

### インストール手順

1. **リポジトリクローン**
   ```bash
   git clone https://github.com/SkDevs-xx/Claude-Code-TechnicalTeamSystem.git
   cd Claude-Code-TechnicalTeamSystem
   ```

2. **実行権限付与**
   ```bash
   chmod +x roles/agent-send.sh setup.sh session-kill.sh
   ```

3. **環境構築**
   ```bash
   ./setup.sh
   ```

4. **Claude Code起動**
   ```bash
   # Techセッション開始
   tmux attach-session -t tech
   # BPチームセッション開始（別ターミナル）
   tmux attach-session -t multiagent
   
   # 各ペインでClaude認証（setup.shが自動実行）
   claude --dangerously-skip-permissions
   
   # 役割認識（各ペインで実行）
   Tech: あなたはTechです。CLAUDE.mdとroles/tech.mdを確認してください。
   BP1-4: 各BPペインで手動でClaude Code起動後、role_reminderで認識
   ```

## 🎮 実際の使い方

### ステップ1: プロジェクト開始
Techペインで日本語指示を入力：
```
あなたはTechです。HTMLとJavaScriptで動作するテトリスゲームを作成してください。
まずは仕様書の作成から開始してください。
```

### ステップ2: 自動ワークフロー実行
以下が自動的に実行されます：

1. **Tech**: 日本語指示を英語仕様書に変換（`plan/`ディレクトリ内）
2. **Tech**: 仕様を技術タスクに分解してJSON形式でBPに送信
3. **BP1,2,3,4**: 各担当コンポーネントを並行開発（`projects/`ディレクトリ内）
4. **Tech**: 統合テスト・品質チェック
5. **Tech**: 完成報告を日本語でユーザーに通知

### ステップ3: 変更要求への対応
プロジェクト途中でも変更可能：
```
スコア表示機能を追加してください。
```

## 🎯 このシステムが真価を発揮するケース

### 最適なケース
1. **中〜大規模Webアプリケーション**: DB + API + フロントエンドの同時開発
2. **リファクタリング**: 既存コードの並列的な改善
3. **マイクロサービス**: 各サービスを別々のBPが担当

### 不向きなケース
1. **単純なスクリプト**: オーバーヘッドが大きい
2. **探索的プログラミング**: 仕様が不明確な場合
3. **リアルタイムシステム**: 通信遅延が問題になる場合

## 💡 実証済みユースケース

### ✨ Webアプリケーション開発
- **フロントエンド**: React/Vue.js SPA
- **バックエンド**: Node.js/Python API
- **データベース**: 設計＆実装

### ✨ ゲーム開発
- **UI/UX**: レスポンシブデザイン
- **ゲームロジック**: JavaScript/Canvas
- **データ管理**: ローカルストレージ/サーバー

### ✨ ツール・ユーティリティ
- **CLI ツール**: 自動化スクリプト
- **データ処理**: CSVパーサー、分析ツール
- **API 統合**: 外部サービス連携

## 🔍 トラブルシューティング

### セッションが起動しない
```bash
# セッション状況確認
tmux list-sessions

# 問題のセッション削除
./session-kill.sh

# 再セットアップ
./setup.sh
```

### エージェント間通信エラー
```bash
# 通信テスト
./roles/agent-send.sh --list

# ログ確認
cat logs/send_log.txt

# 通信テスト例
./roles/agent-send.sh tech '{"test": "connection"}' bp1
```

### Claude Code認証問題
各ペインで個別に認証が必要です：
```bash
claude --dangerously-skip-permissions
```

## 🎯 上級者向け設定

### カスタムエージェント追加
`roles.json`を編集して新しい役割を定義：
```json
{
    "roleName": "QA",
    "title": "Quality Assurance Engineer",
    "keyResponsibilities": ["テスト設計", "バグ検証"],
    "forbiddenActions": ["本番デプロイ"]
}
```

### 通信プロトコル拡張
`agent-send.sh`を修正してSlackやGitHub連携も可能

### パフォーマンス最適化
大規模プロジェクトでは`BP`エージェントを増やしてタスク並列化

## 💪 開発者へのメッセージ

このシステムは、**AIと人間の協働の未来**を探求する実験的プロジェクトです。

### なぜオープンソースなのか
- **透明性**: AIのブラックボックス化を防ぐ
- **再現性**: 誰でも同じ結果を得られる
- **拡張性**: コミュニティの知恵を結集

### 次のステップ
1. **実験**: まずは小さなプロジェクトで試してみる
2. **改善**: あなたのユースケースに合わせてカスタマイズ
3. **共有**: 成功例や改善点をコミュニティにフィードバック

### 課題報告
GitHub Issuesで以下の情報と共に報告してください：
- 環境情報（OS、tmux/Claude Codeバージョン）
- 再現手順
- 期待される動作と実際の動作

## 📄 ライセンス

MIT License - 詳細は[LICENSE](LICENSE)ファイルを参照

## 📋 実際の成果例

このシステムで開発されたプロジェクト：
- **テトリスゲーム**: 仕様定義から完動まで30分
- **TODOアプリ**: DB設計・API・フロントエンド同時開発
- **チャットボット**: WebSocketを使ったリアルタイム通信

## 🙏 謝辞

このシステムは、「**AIは単なるツールではなく、チームメンバーになり得る**」という信念のもと開発されました。

特に以下の点にこだわりました：
- **役割認識の自動化**: 「ハッ！」と思い出す人間的な振る舞い
- **エラーからの回復力**: ERROR→自動修正のサイクル
- **コンテキストの永続性**: CLAUDE.mdによる記憶の維持

---

**🎯 今すぐ始める**: Techペインで「あなたはTechです。CLAUDE.mdとroles/tech.mdを確認してください。」から始めて、**5つのAIが協調する驚異の開発体験**を味わってください！

### 🔧 重要な注意事項

1. **プロジェクトディレクトリ**: 全ての開発作業は`projects/`ディレクトリ内で行われます
2. **通信ログ**: 全てのエージェント間通信は`logs/send_log.txt`に記録されます
3. **役割の厳格な分離**: 各エージェントは決められた役割のみを実行します
4. **日本語⇔JSON変換**: TechエージェントがユーザーとBPの間の言語変換を担当します
